import React from 'react';
import { render, screen, fireEvent } from '@testing-library/react';
import Tab from '../src/Components/Tab.jsx';

const courseData = [
  {
    id: 1,
    name: 'Course 1',
    category: 'popular',
  },
  {
    id: 2,
    name: 'Course 2',
    category: 'science',
  },
  {
    id: 3,
    name: 'Course 3',
    category: 'mathematics',
  },
  {
    id: 4,
    name: 'Course 4',
    category: 'computer',
  },
];

describe('Tab', () => {
  it('renders the component with the default "popular" tab selected', () => {
    render(<Tab course={courseData} />);

    expect(screen.getByRole('tab', { name: 'Popular' })).toHaveAttribute(
      'aria-selected',
      'true'
    );
    expect(screen.getByRole('tabpanel', { name: 'popular' })).toBeInTheDocument();
  });

  it('switches to the "science" tab when clicked', () => {
    render(<Tab course={courseData} />);

    const scienceTab = screen.getByRole('tab', { name: 'Science' });
    fireEvent.click(scienceTab);

    expect(scienceTab).toHaveAttribute('aria-selected', 'true');
    expect(screen.getByRole('tabpanel', { name: 'science' })).toBeInTheDocument();
  });

  it('displays the correct course data for the "mathematics" tab', () => {
    render(<Tab course={courseData} />);

    const mathematicsTab = screen.getByRole('tab', { name: 'Mathematics' });
    fireEvent.click(mathematicsTab);

    const mathematicsCourses = screen.getAllByText(/Course \d/);
    expect(mathematicsCourses).toHaveLength(1);
    expect(mathematicsCourses[0]).toHaveTextContent('Course 3');
  });

  it('displays a message when there are no courses for the "computer" tab', () => {
    render(<Tab course={courseData} />);

    const computerTab = screen.getByRole('tab', { name: 'Computer' });
    fireEvent.click(computerTab);

    expect(screen.getByText('No courses found.')).toBeInTheDocument();
  });
});